<h1>PENDING TRANSACTIONS</h1>

<p>
<div>ACCEPT OR REJECT APPLICATIONS TO BORROW YOUR ITEMS</div>
<table>
	<tr>
		<th>Item</th>
		<th>Description</th>
		<th>Borrower</th>
        <th>Start Date</th>
        <th>End Date</th>
	</tr>
    <% @lend_transactions.each do |transaction|%>
        <% if transaction.isApproved == 0%>
            <tr>
                <td><%= transaction.item.name %></td>
                <td><%= transaction.item.description %></td>
                <td><%= transaction.borrower.username%></td>
                <td><%= transaction.start_date%></td>
                <td><%= transaction.end_date%></td>

				<% query_params_approved = {isApproved: 1} %>
				<% query_params_rejected = {isApproved: 2} %>
                <td><%= link_to 'accept', transaction_path(transaction, transaction: query_params_approved), method: :put %></td>
                <td><%= link_to 'reject', transaction_path(transaction, transaction: query_params_rejected), method: :put %></td>
            </tr>
        <% end %>
    <% end %>
</table>
</p>


<p>
<div>YOUR PENDING BORROW REQUESTS that have not been accepted yet</div>
<table>
	<tr>
		<th>Item</th>
		<th>Description</th>
		<th>Lender</th>
        <th>Start Date</th>
        <th>End Date</th>
	</tr>
    <% @borrow_transactions.each do |transaction|%>
        <% if transaction.isApproved == 0%>
            <tr>
                <td><%= transaction.item.name %></td>
                <td><%= transaction.item.description %></td>
                <td><%= transaction.lender.username%></td>
                <td><%= transaction.start_date%></td>
                <td><%= transaction.end_date%></td>
                <td><%= link_to 'edit', edit_transaction_path(transaction) %></td>
                <td><%= link_to 'delete', transaction_path(transaction), method: :delete %></td>

            </tr>
        <% end %>
    <% end %>
</table>
</p>

<p>
<div>YOUR REJECTED REQUESTS TO BORROW OTHER USERS' ITEMS</div>
<table>
	<tr>
		<th>Item</th>
		<th>Description</th>
		<th>Lender</th>
        <th>Start Date</th>
        <th>End Date</th>
	</tr>
    <% @borrow_transactions.each do |transaction|%>
        <% if transaction.isApproved == 2%>
            <tr>
                <td><%= transaction.item.name %></td>
                <td><%= transaction.item.description %></td>
                <td><%= transaction.lender.username%></td>
                <td><%= transaction.start_date%></td>
                <td><%= transaction.end_date%></td>
            </tr>
        <% end %>
    <% end %>
</table>
</p>


<div>
<%=link_to 'back to show user', user_path(@user)%>
</div>
